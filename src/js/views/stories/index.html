<h1>Index</h1>

<input ng-model="stories.q" type="text" name="" value="" ng-change="stories.searchQuery()">

<div ng-hide="stories.filtering" ng-repeat="genre in stories.possibleGenres">
  <h2>{{genre}}</h2>
  <ul ng-repeat="story in stories.all">
    <div ng-show="story.genre === '{{genre}}'">
      <img src="{{ story.image }}" alt="">
      <li ui-sref="storiesShow({ id: story._id})">{{story.title}}</li>
      <li>{{story.genre}}</li>
      <li >{{story.rules.contain}}</li>
      <li >{{story.rules.start}}</li>
      <li ng-repeat="contribution in story.contributions">{{contribution}}</li>

      <a ui-sref="userShow({ id: story.createdBy.id})">{{story.createdBy.username}}</a>
    </div>
  </ul>
</div>


<div ng-show="stories.filtering" ng-repeat="story in stories.all | filter: stories.q">
  <ul>
    <li>{{story.title}}</li>
    <li>{{story.genre}}</li>
    <li>{{story.contributions}}</li>
  </ul>
</div>
